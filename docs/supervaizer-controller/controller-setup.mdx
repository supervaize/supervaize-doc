---
id: controller-setup
title: Controller Setup Guide
displayed_sidebar: supervaizerControllerSidebar
slug: controller-setup
---

import Link from "@docusaurus/Link";
import "bootstrap-icons/font/bootstrap-icons.css";

This guide walks you through customizing your Supervaizer controller step by step.

## Overview

:::info

This step-by-step guide uses the [<i className="bi bi-github"></i> EmailAIAgent](https://github.com/parthshr370/Email-AI-Agent?tab=readme-ov-file) as an example.

See the [Quickstart guide](quickstart) for installation instructions.
:::

After running `supervaizer scaffold`, you'll have a template file to customize. This guide shows you how to:

[<i className="bi bi-1-circle-fill"></i> Define agent parameters: ParameterSetup()](#1)

[<i className="bi bi-2-circle-fill"></i> Define agent methods: AgentMethod()](#2)

[<i className="bi bi-3-circle-fill"></i> Define the **fields** of the AgentMethods: AgentMethodField()](#3)

[<i className="bi bi-4-circle-fill"></i> Declare the agent: Agent()](#4)

[<i className="bi bi-5-circle-fill"></i> Define the account: Account()](#5)

[<i className="bi bi-6-circle-fill"></i> Setup the server: Server()](#6)

:::note
Open `supervaizer_control_example.py` and adapt the content to the EmailAIAgent.
:::

## 1. Define agent parameters {#1}

Use **Parameter** / **ParametersSetup** to declare what the agent needs. These show up in Supervaize UI and can be marked as env or secret.

```js reference title="Map Parameters"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_control.py#L27-L83
```

**ðŸ“– See the model references**

[Parameter Documentation](/docs/supervaizer-controller/model_reference/model_core#parameterparameterabstract)

[ParameterSetup Documentation](/docs/supervaizer-controller/model_reference/model_core#parameterparameterssetup)

## 2. Define agent methods {#2}

Point Supervaizer to your agent's functions.

:::tip
It usually saves time to duplicate the main file of the script and create an adapted version where all methods are called with the expected parameters.
This is what we have done in the **[sv_main.py](https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/sv_main.py)** file.
:::

```python title="Methods: wire your agent's functions" {8}
from supervaizer import AgentMethod

job_start = AgentMethod(
    name="start", # This is required
    method="sv_main.process_email_workflow", # Path to the main function in dotted notation.
    params={}, # If default parameters must be passed to the function.
    is_async=False, # Only use sync methods for the moment
    fields=[] # Defined below
```

[See below for definition of fields ](#3)

```python title="Additional required methods"
job_stop = AgentMethod(
    name="stop", # Must be present
    method="email_agent.jobs.stop",   # Initial deployment does not require this method to do anything
    is_async=False,
)

job_status = AgentMethod(
    name="status", # Must be present
    method="email_agent.jobs.status", # Initial deployment does not require this method to do anything
    is_async=False,
)
```

**ðŸ“– See the model reference**

[ParameterModel Documentation](/docs/supervaizer-controller/model_reference/model_core#agentagentmethodabstract)

## 3. Define the fields of the AgentMethods {#3}

The `fields` parameter defines the user input form that will be displayed in the Supervaize UI. Each field specifies what data users need to provide when calling your agent method.

### Field setup for the "Start" method

```js reference title="Fields of Start AgentMethod"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_control.py#L92-L131
```

**ðŸ“– See the model reference**

[AgentMethodField Documentation](/docs/supervaizer-controller/model_reference/model_core#agentagentmethodfield)

## 4. Declare the agent {#4}

The `Agent` class defines your agent's metadata and capabilities. This is where you specify what your agent does, who maintains it, and how it can be discovered.

```js reference title="Agent definition"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_control.py#L145-L165
```

**ðŸ“– See the model reference**

[Agent Documentation](/docs/supervaizer-controller/model_reference/model_core#agentagentabstract)

## 5.Setup the Supervaize Account and configure your Environment variables {#5}

:::info
This step is not needed to run the supervaizer as an A2A / ACP server only. See [Protocol support](/docs/supervaizer-controller/ref/PROTOCOLS)
:::

[Create your developer account](/docs/supervaize-fleet/developer-account#getting_started) on the Supervaize platform.

Create your API Key and collect your environment variables.

See the [Quickstart guide](quickstart#4) to setup the environment variables

```js reference title="Account definition"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_control.py#L167-L172
```

**ðŸ“– See the model reference**

[Account Documentation](/docs/supervaizer-controller/model_reference/model_core#accountaccountabstract)

## 6. Setup the Server {#6}

### Config

The `Server` class wraps all the defined components together.

At the minimum, the server requires at least one agent to be defined and the supervisor account (we are using Supervaize as the supervisor).

```js reference title="Server definition"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_control.py#L174-L181
```

:::warning Important
Note that if `supervaizor_account` is provided, the A2A protocol is automatically activated
:::

**ðŸ“– See the model reference**

[Server Documentation](/docs/supervaizer-controller/model_reference/model_core#serverserverabstract)

### Server launch

```js reference title="Server launch"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_control.py#L183-L185
```

See [Server Start ðŸš€](/docs/supervaizer-controller/quickstart#start) for CLI instructions

## What's next?

- Return to the [Quickstart](/docs/supervaizer-controller/quickstart) to continue with configuration and deployment
- Check the [Model Reference](/docs/supervaizer-controller/model_reference/model_core) for detailed field specifications
- Explore [API Reference](/docs/supervaizer-controller/ref/API_REFERENCE) for advanced usage
