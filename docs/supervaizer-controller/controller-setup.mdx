---
id: controller-setup
title: Controller Setup Guide
displayed_sidebar: supervaizerControllerSidebar
slug: /controller/setup
---

import Link from "@docusaurus/Link";
import "bootstrap-icons/font/bootstrap-icons.css";

This guide walks you through customizing your Supervaizer controller step by step.

## Overview

After running `supervaizer scaffold`, you'll have a template file to customize. This guide shows you how to:

- Define **agent parameters** (secrets, env, required inputs)
- Define **agent methods** (start/stop/status, etc.)
- Map those methods to **your agent's functions**

:::info

This step-by-step guide uses the [<i className="bi bi-github"></i> EmailAIAgent](https://github.com/parthshr370/Email-AI-Agent?tab=readme-ov-file) as an example.

See the [Quickstart guide](quickstart) for installation instructions.
:::

### Steps

[<i className="bi bi-1-circle-fill"></i> Define agent parameters](#1)

[<i className="bi bi-2-circle-fill"></i> Define agent
methods](#2)

[<i className="bi bi-3-circle-fill"></i> Define the **fields** of the AgentMethods](#3)

[<i className="bi bi-4-circle-fill"></i> Declare the agent and define the server](#4)

:::note
Open `supervaizer_control_example.py` and adapt the content to the EmailAIAgent.
:::

## 1. Define agent parameters {#1}

Use **Parameter** / **ParametersSetup** to declare what the agent needs. These show up in Supervaize UI and can be marked as env or secret.

```js reference title="Map Parameters"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_email_agent_controller.py#L27-L83
```

**ðŸ“– See the model reference**

[ParameterModel Documentation](/docs/supervaizer-controller/model_reference/model_core#parameterparameterabstract)

## 2. Define agent methods {#2}

Point Supervaizer to your agent's functions.

:::tip
It usually saves time to duplicate the main file of the script and create an adapted version where all methods are called with the expected parameters.
This is what we have done in the **[sv_main.py](https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/sv_main.py)** file.
:::

```python title="Methods: wire your agent's functions" {8}
from supervaizer import AgentMethod

job_start = AgentMethod(
    name="start", # This is required
    method="sv_main.process_email_workflow", # Path to the main function in dotted notation.
    params={}, # If default parameters must be passed to the function.
    is_async=False, # Only use sync methods for the moment
    fields=[] # Defined below
```

[See below for definition of fields ](#3)

```python title="Additional required methods"
job_stop = AgentMethod(
    name="stop", # Must be present
    method="email_agent.jobs.stop",   # Initial deployment does not require this method to do anything
    is_async=False,
)

job_status = AgentMethod(
    name="status", # Must be present
    method="email_agent.jobs.status", # Initial deployment does not require this method to do anything
    is_async=False,
)
```

**ðŸ“– See the model reference**

[ParameterModel Documentation](/docs/supervaizer-controller/model_reference/model_core#agentagentmethodabstract)

## 3. Define the fields of the AgentMethods {#3}

The `fields` parameter defines the user input form that will be displayed in the Supervaize UI. Each field specifies what data users need to provide when calling your agent method.

### Field setup for the "Start" method

```js reference title="Fields of Start AgentMethod"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_email_agent_controller.py#L92-L131
```

**ðŸ“– See the model reference**

[AgentMethodField Documentation](/docs/supervaizer-controller/model_reference/model_core#agentagentmethodfield)

## 4. Declare the agent and server {#4}

### Define the Agent

The `Agent` class defines your agent's metadata and capabilities. This is where you specify what your agent does, who maintains it, and how it can be discovered.

```js reference title="Agent definition"
https://github.com/alain-sv/Email-AI-Agent/blob/supervaizer/supervaizer_email_agent_controller.py#L145-L165
```

**ðŸ“– See the model reference**

[Agent Documentation](/docs/supervaizer-controller/model_reference/model_core#agentagentabstract)

### Configure Environment Variables

Before starting the server, ensure your agent has access to the required environment variables. Based on the [Quickstart guide](quickstart#4), create a `.env` file in your project root:

```env title=".env"
OPENAI_API_KEY=sk-...
EMAIL_SENDER=ops@yourdomain.com
```

### Define the Supervaize Account

:::info
This step is not needed to run the supervaizer as an A2A / ACP server only. See [Protocol support](/docs/supervaizer-controller/PROTOCOLS)
:::

### Define the Server

The `Server` class wraps your agent and provides the HTTP API endpoints:

```python title="Server definition"
sv_server = Server(
    agents=[agent],
    acp_endpoints=True,  # optional: ACP discovery
    a2a_endpoints=True,  # optional: Google's A2A discovery
    supervisor_account=None,
)

if __name__ == "__main__":
    sv_server.launch(log_level="DEBUG")  # starts FastAPI/uvicorn on :8000
```

:::tip Verify endpoints
Once the server is running, you'll have:

- **API docs**: `http://127.0.0.1:8000/docs` (Swagger) and `/redoc`
- **A2A discovery**: `/.well-known/agents.json`
- **ACP discovery**: `/agents`
  :::

## What's next?

- Return to the [Quickstart](/docs/supervaizer-controller/quickstart) to continue with configuration and deployment
- Check the [Model Reference](/docs/supervaizer-controller/model_reference/model_core) for detailed field specifications
- Explore [API Reference](/docs/supervaizer-controller/API_REFERENCE) for advanced usage
